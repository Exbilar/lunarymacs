os: osx
language: emacs-lisp
sudo: false

env:
  global:
    - TRAVIS_TESTING=t
  matrix:
    - EMACS_VERSION=26.1

install:
  # copied from eglot repo
  - curl -LO https://github.com/npostavs/emacs-travis/releases/download/bins/emacs-bin-${EMACS_VERSION}.tar.gz
  - tar -xf emacs-bin-${EMACS_VERSION}.tar.gz -C /
  # configure $PATH: Emacs installed to /tmp/emacs
  - export PATH=/tmp/emacs/bin:${PATH}
  - emacs --version
  - cd ~
  - git clone https://github.com/casouri/lunarymacs.git .emacs.d
  - cd .emacs.d
  - git clone https://github.com/casouri/lunarymacs-stars.git star
  - cp init.test.el init.el
  - make --version

script:
  - make
  - make test

